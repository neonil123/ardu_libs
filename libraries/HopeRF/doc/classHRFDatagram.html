<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>HopeRF: HRFDatagram Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">HopeRF
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#pro-attribs">Protected Attributes</a>  </div>
  <div class="headertitle">
<div class="title">HRFDatagram Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="HRFDatagram" --><!-- doxytag: inherits="HRFMessage" -->
<p>Class for addressed, unreliable messages.  
 <a href="classHRFDatagram.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="HRFDatagram_8h_source.html">HRFDatagram.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for HRFDatagram:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classHRFDatagram.png" usemap="#HRFDatagram_map" alt=""/>
  <map id="HRFDatagram_map" name="HRFDatagram_map">
<area href="classHRFMessage.html" title="Basic message class for HopeRF data transceivers." alt="HRFMessage" shape="rect" coords="0,0,136,24"/>
<area href="classHRFReliableDatagram.html" title="Class for sending addressed, acknowledged, retransmitted datagrams." alt="HRFReliableDatagram" shape="rect" coords="0,112,136,136"/>
</map>
 </div></div>

<p><a href="classHRFDatagram-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHRFDatagram.html#a1ae3181ffdbdc6256a2e64122c85d1de">HRFDatagram</a> (HardwareSerial *serial=&amp;Serial, uint8_t thisAddress=0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHRFDatagram.html#ae02e474683cdb04b7a3cb42c8472501c">setThisAddress</a> (uint8_t thisAddress)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHRFDatagram.html#aaedca44a35ddd9bbe739327dec4ac9fa">sendto</a> (uint8_t address, uint8_t *buf, uint8_t len)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHRFDatagram.html#a79cd59f8d1c39301bdc0c1b69120a4a1">recvfrom</a> (uint8_t *buf, uint8_t *len, uint8_t *from=NULL, uint8_t *to=NULL, uint8_t promiscuous=0)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHRFDatagram.html#a9d2ee7f27164a83140f7a8e937e7e203">recv</a> (uint8_t *buf, uint8_t *len)</td></tr>
<tr><td colspan="2"><h2><a name="pro-attribs"></a>
Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a6157c61f42714d59c5b286f7fb9fd871"></a><!-- doxytag: member="HRFDatagram::_thisAddress" ref="a6157c61f42714d59c5b286f7fb9fd871" args="" -->
uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHRFDatagram.html#a6157c61f42714d59c5b286f7fb9fd871">_thisAddress</a></td></tr>
<tr><td class="mdescLeft">&#160;</td><td class="mdescRight">The address of this node. Defaults to 0. <br/></td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Class for addressed, unreliable messages. </p>
<p>Extends <a class="el" href="classHRFMessage.html" title="Basic message class for HopeRF data transceivers.">HRFMessage</a> to define addressed, unreliable datagrams. Every node has an 8 bit address (defaults to 0). Datagrams have format LEN DEST SRC payload FCS-LO FCS-HI. Addresses (DEST and SRC) are 8 bit integers with an address of HRF_BROADCAST_ADDRESS (0xff) reserved for broadcast.</p>
<p>Part of the Arduino HopeRF library for operating with HopeRF HM-TR transceivers (see <a href="http://www.hoperf.com">http://www.hoperf.com</a>). </p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="a1ae3181ffdbdc6256a2e64122c85d1de"></a><!-- doxytag: member="HRFDatagram::HRFDatagram" ref="a1ae3181ffdbdc6256a2e64122c85d1de" args="(HardwareSerial *serial=&amp;Serial, uint8_t thisAddress=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HRFDatagram::HRFDatagram </td>
          <td>(</td>
          <td class="paramtype">HardwareSerial *&#160;</td>
          <td class="paramname"><em>serial</em> = <code>&amp;Serial</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>thisAddress</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">serial</td><td>The instance of HardwareSerial to use for IO. Defaults to &amp;Serial, </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">thisAddress</td><td>The address to assign to this node. Defaults to 0 </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="classHRFDatagram.html#ae02e474683cdb04b7a3cb42c8472501c">setThisAddress()</a>.</p>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a9d2ee7f27164a83140f7a8e937e7e203"></a><!-- doxytag: member="HRFDatagram::recv" ref="a9d2ee7f27164a83140f7a8e937e7e203" args="(uint8_t *buf, uint8_t *len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t HRFDatagram::recv </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>If there is a valid message available for this node, copy it to buf and return true else return false. You can't recover the SRC or DEST address with this call, so you would only use it if you do not intend to reply. If a message is copied, *len is set to the length. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">buf</td><td>Location to copy the received message </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>Available space in buf. Set to the actual number of octets copied. </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if a valid message was copied to buf </dd></dl>

<p>Reimplemented from <a class="el" href="classHRFMessage.html#ab5c6825026563c7afe55bfb3c5466173">HRFMessage</a>.</p>

<p>References <a class="el" href="classHRFDatagram.html#a79cd59f8d1c39301bdc0c1b69120a4a1">recvfrom()</a>.</p>

</div>
</div>
<a class="anchor" id="a79cd59f8d1c39301bdc0c1b69120a4a1"></a><!-- doxytag: member="HRFDatagram::recvfrom" ref="a79cd59f8d1c39301bdc0c1b69120a4a1" args="(uint8_t *buf, uint8_t *len, uint8_t *from=NULL, uint8_t *to=NULL, uint8_t promiscuous=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t HRFDatagram::recvfrom </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>len</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>from</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>to</em> = <code>NULL</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>promiscuous</em> = <code>0</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>If there is a message available for this node, copy it to buf and return true If the message was valid (ie good FCS), return true else return false. The SRC address is placed in *from if present and not NULL. The DEST address is placed in *to if present and not NULL. If promiscuous is present and true, all messages will be returned, not just those addressed to this node. If a message is copied, *len is set to the length. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">buf</td><td>Location to copy the received message </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>Available space in buf. Set to the actual number of octets copied. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">from</td><td>If present and not NULL, the referenced uint8_t will be set to the SRC address </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">to</td><td>If present and not NULL, the referenced uint8_t will be set to the DEST address </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">promiscuous</td><td>If present and true, return all received messages (not just those addressed to this node). </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if a valid (good FCS) message was copied to buf </dd></dl>

<p>References <a class="el" href="classHRFDatagram.html#a6157c61f42714d59c5b286f7fb9fd871">_thisAddress</a>, and <a class="el" href="classHRFMessage.html#ab5c6825026563c7afe55bfb3c5466173">HRFMessage::recv()</a>.</p>

<p>Referenced by <a class="el" href="classHRFDatagram.html#a9d2ee7f27164a83140f7a8e937e7e203">recv()</a>, <a class="el" href="classHRFReliableDatagram.html#a963f0dfc59aece24f248fd348984f473">HRFReliableDatagram::recvfromAck()</a>, and <a class="el" href="classHRFReliableDatagram.html#a72c930aea867a5ec0570c5ce10dbcb46">HRFReliableDatagram::sendtoWait()</a>.</p>

</div>
</div>
<a class="anchor" id="aaedca44a35ddd9bbe739327dec4ac9fa"></a><!-- doxytag: member="HRFDatagram::sendto" ref="aaedca44a35ddd9bbe739327dec4ac9fa" args="(uint8_t address, uint8_t *buf, uint8_t len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t HRFDatagram::sendto </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>address</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sends a message to the node(s) with the given address HRF_BROADCAST_ADDRESS is a valid address which will cause the message to be accepted by all <a class="el" href="classHRFDatagram.html" title="Class for addressed, unreliable messages.">HRFDatagram</a> nodes within range. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">address</td><td>The address to send the message to. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">buf</td><td>Pointer to the binary message to send </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>Number of octets to send </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if the message was transmitted. </dd>
<dd>
false if the message is too long (&gt;HRF_MAX_DATAGRAM_PAYLOAD). </dd></dl>

<p>References <a class="el" href="classHRFDatagram.html#a6157c61f42714d59c5b286f7fb9fd871">_thisAddress</a>, and <a class="el" href="classHRFMessage.html#ac18b2d1fc9fad05a0b845598fbae605a">HRFMessage::send()</a>.</p>

<p>Referenced by <a class="el" href="classHRFReliableDatagram.html#a963f0dfc59aece24f248fd348984f473">HRFReliableDatagram::recvfromAck()</a>, and <a class="el" href="classHRFReliableDatagram.html#a72c930aea867a5ec0570c5ce10dbcb46">HRFReliableDatagram::sendtoWait()</a>.</p>

</div>
</div>
<a class="anchor" id="ae02e474683cdb04b7a3cb42c8472501c"></a><!-- doxytag: member="HRFDatagram::setThisAddress" ref="ae02e474683cdb04b7a3cb42c8472501c" args="(uint8_t thisAddress)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HRFDatagram::setThisAddress </td>
          <td>(</td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>thisAddress</em></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Sets the address of this node. Defaults to 0. If all the nodes leave the address unset (ie 0), <a class="el" href="classHRFDatagram.html" title="Class for addressed, unreliable messages.">HRFDatagram</a> acts much the same as <a class="el" href="classHRFMessage.html" title="Basic message class for HopeRF data transceivers.">HRFMessage</a> (with a bit more overhead). In a conventional multinode system, all nodes will have a unique address (which you could store in EEPROM). However, if you only have 2 nodes in the network, you can leave the addresses of each set to the default of 0. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">thisAddress</td><td>The address of this node </td></tr>
  </table>
  </dd>
</dl>

<p>References <a class="el" href="classHRFDatagram.html#a6157c61f42714d59c5b286f7fb9fd871">_thisAddress</a>.</p>

<p>Referenced by <a class="el" href="classHRFDatagram.html#a1ae3181ffdbdc6256a2e64122c85d1de">HRFDatagram()</a>.</p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="HRFDatagram_8h_source.html">HRFDatagram.h</a></li>
<li>HRFDatagram.cpp</li>
</ul>
</div>


<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.5.1
</small></address>

</body>
</html>
