<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>HopeRF: HRFMessage Class Reference</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />



</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">HopeRF
   
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.7.5.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a>  </div>
  <div class="headertitle">
<div class="title">HRFMessage Class Reference</div>  </div>
</div>
<div class="contents">
<!-- doxytag: class="HRFMessage" -->
<p>Basic message class for HopeRF data transceivers.  
 <a href="classHRFMessage.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="HRFMessage_8h_source.html">HRFMessage.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for HRFMessage:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classHRFMessage.png" usemap="#HRFMessage_map" alt=""/>
  <map id="HRFMessage_map" name="HRFMessage_map">
<area href="classHRFDatagram.html" title="Class for addressed, unreliable messages." alt="HRFDatagram" shape="rect" coords="0,56,136,80"/>
<area href="classHRFReliableDatagram.html" title="Class for sending addressed, acknowledged, retransmitted datagrams." alt="HRFReliableDatagram" shape="rect" coords="0,112,136,136"/>
</map>
 </div></div>

<p><a href="classHRFMessage-members.html">List of all members.</a></p>
<table class="memberdecls">
<tr><td colspan="2"><h2><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" align="right" valign="top">&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHRFMessage.html#ad7be6850a3a97bb072fce2a03ec02f9f">HRFMessage</a> (HardwareSerial *serial=&amp;Serial)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHRFMessage.html#ac18b2d1fc9fad05a0b845598fbae605a">send</a> (uint8_t *buf, uint8_t len)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHRFMessage.html#a770700a501f707f777dd150faceba9be">available</a> ()</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHRFMessage.html#ab5c6825026563c7afe55bfb3c5466173">recv</a> (uint8_t *buf, uint8_t *len)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHRFMessage.html#a9debd8f3241f4736f0d998d5c1f26a25">rx_bad</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual uint8_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHRFMessage.html#aa223a67dcccdbc052e56be3f2d79e56b">rx_good</a> (void)</td></tr>
<tr><td class="memItemLeft" align="right" valign="top">virtual void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classHRFMessage.html#abf67b6f014b1f38e3513a4d97bcba607">waitAvailable</a> (void)</td></tr>
</table>
<hr/><a name="details" id="details"></a><h2>Detailed Description</h2>
<div class="textblock"><p>Basic message class for HopeRF data transceivers. </p>
<p>Define low level unaddressed, unreliable message. <a class="el" href="classHRFMessage.html" title="Basic message class for HopeRF data transceivers.">HRFMessage</a> have the format LEN payload FCS-LO FCS-HI. LEN is the total number of octets in the message, including the LEN and FCS octets FCS (16 bits) is the complement of CCITT CRC-16 of all octets in the message, including the LEN <a class="el" href="classHRFMessage.html" title="Basic message class for HopeRF data transceivers.">HRFMessage</a> is unaddressed, and will be received by all <a class="el" href="classHRFMessage.html" title="Basic message class for HopeRF data transceivers.">HRFMessage</a> nodes within range.</p>
<p>This class and others in this library provide easy methods for sending and receiving messages using the HM-TR. Several layers of classes are provided above this to provide a range of features from unacknowledged broadcasts to acknowledged, reliable addressed messages.</p>
<p>Although HopeRF HM-TR transceivers have an enable pin, this library make no use of that. Enabling and disabling of the transceiver when it is not required should be done by other code.</p>
<p>Although HopeRF HM-TR transceivers have a Config pin, this library make no use of that, since it must be enabled when the transceiver powers up. This librray assumes the transceiver has already been configured, typically using the HopeRF configuration program. </p>
</div><hr/><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" id="ad7be6850a3a97bb072fce2a03ec02f9f"></a><!-- doxytag: member="HRFMessage::HRFMessage" ref="ad7be6850a3a97bb072fce2a03ec02f9f" args="(HardwareSerial *serial=&amp;Serial)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">HRFMessage::HRFMessage </td>
          <td>(</td>
          <td class="paramtype">HardwareSerial *&#160;</td>
          <td class="paramname"><em>serial</em> = <code>&amp;Serial</code></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>You can have multiple instances for HM-TR modules on multiple HardwareSerial ports. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">serial</td><td>The instance of HardwareSerial to use for IO. Defaults to &amp;Serial, the Arduino default serial port. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<hr/><h2>Member Function Documentation</h2>
<a class="anchor" id="a770700a501f707f777dd150faceba9be"></a><!-- doxytag: member="HRFMessage::available" ref="a770700a501f707f777dd150faceba9be" args="()" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t HRFMessage::available </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<dl class="return"><dt><b>Returns:</b></dt><dd>message length if a complete unread message is available </dd>
<dd>
0 (false) if no message is available yet) </dd></dl>

<p>Referenced by <a class="el" href="classHRFMessage.html#ab5c6825026563c7afe55bfb3c5466173">recv()</a>.</p>

</div>
</div>
<a class="anchor" id="ab5c6825026563c7afe55bfb3c5466173"></a><!-- doxytag: member="HRFMessage::recv" ref="ab5c6825026563c7afe55bfb3c5466173" args="(uint8_t *buf, uint8_t *len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t HRFMessage::recv </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>If a message is available (good checksum or not), copies up to *len octets to buf. If a message is copied, *len is set to the length </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if there was a message copied _and_ the FCS checksum was good </dd></dl>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">buf</td><td>Location to copy the received message </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>Available space in buf. Set to the actual number of octets copied. </td></tr>
  </table>
  </dd>
</dl>

<p>Reimplemented in <a class="el" href="classHRFDatagram.html#a9d2ee7f27164a83140f7a8e937e7e203">HRFDatagram</a>.</p>

<p>References <a class="el" href="classHRFMessage.html#a770700a501f707f777dd150faceba9be">available()</a>.</p>

<p>Referenced by <a class="el" href="classHRFDatagram.html#a79cd59f8d1c39301bdc0c1b69120a4a1">HRFDatagram::recvfrom()</a>.</p>

</div>
</div>
<a class="anchor" id="a9debd8f3241f4736f0d998d5c1f26a25"></a><!-- doxytag: member="HRFMessage::rx_bad" ref="a9debd8f3241f4736f0d998d5c1f26a25" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t HRFMessage::rx_bad </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The bad message count starts at 0 at instantation time, and is incremented whenever a message with a bad length is received. This generally indicates a corrupt messages. </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>the number of corrupt messages received. </dd></dl>

</div>
</div>
<a class="anchor" id="aa223a67dcccdbc052e56be3f2d79e56b"></a><!-- doxytag: member="HRFMessage::rx_good" ref="aa223a67dcccdbc052e56be3f2d79e56b" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t HRFMessage::rx_good </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>The good message count starts at 0 at instantation time, and is incremented whenever a complete message is received, </p>
<dl class="return"><dt><b>Returns:</b></dt><dd>the number of good messages received. </dd></dl>

</div>
</div>
<a class="anchor" id="ac18b2d1fc9fad05a0b845598fbae605a"></a><!-- doxytag: member="HRFMessage::send" ref="ac18b2d1fc9fad05a0b845598fbae605a" args="(uint8_t *buf, uint8_t len)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">uint8_t HRFMessage::send </td>
          <td>(</td>
          <td class="paramtype">uint8_t *&#160;</td>
          <td class="paramname"><em>buf</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint8_t&#160;</td>
          <td class="paramname"><em>len</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Send a message with the given length. Blocks and returns after the entire message has been sent. Any binary data is permitted. </p>
<dl><dt><b>Parameters:</b></dt><dd>
  <table class="params">
    <tr><td class="paramdir">[in]</td><td class="paramname">buf</td><td>Pointer to the binary message to send </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">len</td><td>Number of octets to send </td></tr>
  </table>
  </dd>
</dl>
<dl class="return"><dt><b>Returns:</b></dt><dd>true if the message was transmitted </dd>
<dd>
false if the message is too long (&gt;HRF_MAX_PAYLOAD) </dd></dl>

<p>Referenced by <a class="el" href="classHRFDatagram.html#aaedca44a35ddd9bbe739327dec4ac9fa">HRFDatagram::sendto()</a>.</p>

</div>
</div>
<a class="anchor" id="abf67b6f014b1f38e3513a4d97bcba607"></a><!-- doxytag: member="HRFMessage::waitAvailable" ref="abf67b6f014b1f38e3513a4d97bcba607" args="(void)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void HRFMessage::waitAvailable </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname"></td><td>)</td>
          <td><code> [virtual]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">
<p>Wait until at least 1 octet is available on the serial device On Arduino, polls the device. On Linux, blocks </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="HRFMessage_8h_source.html">HRFMessage.h</a></li>
<li>HRFMessage.cpp</li>
</ul>
</div>


<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.7.5.1
</small></address>

</body>
</html>
